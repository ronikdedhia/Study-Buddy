{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Camera, requestCameraPermissionsAsync } from 'expo-camera';\nimport styles from \"../constants/styles\";\nimport Toolbar from \"../components/toolbar\";\nimport { Col, Row, Grid } from \"react-native-easy-grid\";\nimport axios from \"axios\";\nimport Texts from \"../constants/text\";\nimport Constants from \"../constants/text\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function CameraPage(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    cameraRef = _useState4[0],\n    setCameraRef = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    Image = _useState6[0],\n    setImage = _useState6[1];\n  var _useState7 = useState(Camera.Constants.Type.back),\n    _useState8 = _slicedToArray(_useState7, 2),\n    type = _useState8[0],\n    setType = _useState8[1];\n  var logout = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        axios.get(Constants.ApiLink + \"/api/logout\").then(function () {\n          var _ref3 = _asyncToGenerator(function* (response) {\n            navigation.navigate('Login');\n            try {\n              var jsonValue = JSON.stringify(response.data);\n              console.log(\"data: \" + jsonValue);\n            } catch (e) {\n              console.log(\"Got error while storing data to async\" + e);\n            }\n          });\n          return function (_x) {\n            return _ref3.apply(this, arguments);\n          };\n        }());\n        navigation.navigate('Login');\n      } catch (e) {\n        console.warn(e);\n      } finally {\n        setDataLoaded(true);\n      }\n      return true;\n    });\n    return function logout() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var backAction = function backAction() {\n    Alert.alert(\"Hold on!\", \"Are you sure you want to go back?\", [{\n      text: \"Cancel\",\n      onPress: function onPress() {\n        return null;\n      },\n      style: \"cancel\"\n    }, {\n      text: \"YES\",\n      onPress: function onPress() {\n        return logout();\n      }\n    }]);\n    return true;\n  };\n  useEffect(function () {\n    if (navigation.state.routeName == 'Home') {\n      BackHandler.addEventListener(\"hardwareBackPress\", backAction);\n      return function () {\n        return BackHandler.removeEventListener(\"hardwareBackPress\", backAction);\n      };\n    }\n  }, []);\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var _yield$requestCameraP = yield requestCameraPermissionsAsync(),\n        status = _yield$requestCameraP.status;\n      co;\n      setHasPermission(status === 'granted');\n    })();\n  }, []);\n  if (hasPermission === null) {\n    return _jsx(View, {});\n  }\n  if (hasPermission === false) {\n    return _jsx(Text, {\n      children: \"No access to camera\"\n    });\n  }\n  return _jsx(View, {\n    style: {\n      flex: 1\n    },\n    children: _jsx(Camera, {\n      style: {\n        flex: 1\n      },\n      type: type,\n      ref: function ref(_ref5) {\n        setCameraRef(_ref5);\n      },\n      children: _jsx(View, {\n        style: {\n          flex: 1,\n          backgroundColor: 'transparent',\n          flexDirection: 'row'\n        },\n        children: _jsx(Toolbar, {\n          cameraRef: cameraRef,\n          navigation: navigation\n        })\n      })\n    })\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","Camera","requestCameraPermissionsAsync","styles","Toolbar","Col","Row","Grid","axios","Texts","Constants","CameraPage","navigation","hasPermission","setHasPermission","cameraRef","setCameraRef","Image","setImage","Type","back","type","setType","logout","get","ApiLink","then","response","navigate","jsonValue","JSON","stringify","data","console","log","e","warn","setDataLoaded","backAction","Alert","alert","text","onPress","style","state","routeName","BackHandler","addEventListener","removeEventListener","status","co","flex","ref","backgroundColor","flexDirection"],"sources":["C:/Users/rudra/OneDrive/Desktop/Projects/ipd-task/app/components/camerapage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Text, View, TouchableOpacity, TouchableWithoutFeedback,StyleSheet, BackHandler, Alert } from 'react-native';\r\nimport { Camera,requestCameraPermissionsAsync } from 'expo-camera';\r\nimport styles from '../constants/styles';\r\nimport Toolbar from '../components/toolbar';\r\nimport { Col, Row, Grid } from \"react-native-easy-grid\";\r\nimport axios from \"axios\";\r\nimport Texts from \"../constants/text\";\r\nimport Constants from '../constants/text'\r\n\r\n\r\n\r\nexport default function CameraPage({navigation}) {\r\n    const [hasPermission, setHasPermission] = useState(null);\r\n    const [cameraRef, setCameraRef] = useState(null)\r\n    const [Image, setImage] = useState(null)\r\n    \r\n    const [type, setType] = useState(Camera.Constants.Type.back);\r\n    const logout = async () => {\r\n        try {\r\n            // Keep on showing the SlashScreen\r\n\r\n            axios\r\n                .get(`${Constants.ApiLink}/api/logout`)\r\n                .then(async function (response) {\r\n                    // handle success\r\n                    navigation.navigate('Login')\r\n\r\n\r\n                    try {\r\n                        const jsonValue = JSON.stringify(response.data);\r\n                        // await AsyncStorage.setItem(\"userData\", jsonValue);\r\n                        console.log(\"data: \" + jsonValue);\r\n                    } catch (e) {\r\n                        // saving error\r\n                        console.log(\"Got error while storing data to async\" + e);\r\n                    }\r\n                })\r\n\r\n            navigation.navigate('Login')\r\n        } catch (e) {\r\n            console.warn(e);\r\n        } finally {\r\n            setDataLoaded(true);\r\n            // Hiding the SplashScreen\r\n\r\n        }\r\n        return true;\r\n\r\n    }\r\n    const backAction = () => {\r\n        Alert.alert(\"Hold on!\", \"Are you sure you want to go back?\", [\r\n          {\r\n            text: \"Cancel\",\r\n            onPress: () => null,\r\n            style: \"cancel\"\r\n          },\r\n          { text: \"YES\", onPress: () => logout()}\r\n        ]);\r\n        return true;\r\n      };\r\n    \r\n      useEffect(() => {\r\n        if (navigation.state.routeName == 'Home') {\r\n            BackHandler.addEventListener(\"hardwareBackPress\", backAction);\r\n        \r\n            return () =>\r\n              BackHandler.removeEventListener(\"hardwareBackPress\", backAction);\r\n        }\r\n       \r\n      }, []);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            const { status } = await requestCameraPermissionsAsync();\r\n            co\r\n            setHasPermission(status === 'granted');\r\n        })();\r\n    }, []); \r\n    \r\n    if (hasPermission === null) {\r\n        return <View />;\r\n    }\r\n    if (hasPermission === false) {\r\n        return <Text>No access to camera</Text>;\r\n    }\r\n    return (\r\n        <View style={{ flex: 1 }}>\r\n            <Camera style={{ flex: 1 }} type={type} ref={ref => {\r\n                setCameraRef(ref);\r\n            }}>\r\n                <View\r\n                    style={{\r\n                        flex: 1,\r\n                        backgroundColor: 'transparent',\r\n                        flexDirection: 'row',\r\n                    }}>\r\n                    <Toolbar cameraRef={cameraRef} navigation={navigation}/>\r\n                </View>\r\n            </Camera>\r\n        </View>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}